{"ast":null,"code":"var _jsxFileName = \"/Users/telmonmaluleka/learn-react-app/MVP/Cheaper-Houses-Nearby/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport MapComponent from './components/MapComponent';\nimport SearchControls from './components/SearchControls';\nimport ResultsList from './components/ResultsList'; // Optional list view\nimport { findCheaperNearbyHouses } from './services/api';\nimport './index.css'; // Ensure styles are imported\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // --- State ---\n  // Map View State (Set your desired initial view)\n  const [mapInitialCenter] = useState({\n    lat: 34.0522,\n    lng: -118.2437\n  }); // Example: Los Angeles\n  const [mapInitialZoom] = useState(10);\n\n  // Search Parameters State\n  const [defaultAreaCenter, setDefaultAreaCenter] = useState(null); // { lat, lng } - Center selected by user click\n  const [defaultAreaRadius, setDefaultAreaRadius] = useState(1500); // meters - Default radius\n  const [searchProximity, setSearchProximity] = useState(5000); // meters - Default search proximity\n  const [filters, setFilters] = useState({}); // For future filters { minPrice, maxPrice, minBeds... }\n\n  // Results State\n  const [results, setResults] = useState([]); // Array of cheaper nearby house objects\n  const [benchmarkPrice, setBenchmarkPrice] = useState(null); // Median price from API\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(''); // Error message string\n\n  // --- Handlers ---\n  const handleSearch = useCallback(async () => {\n    if (!defaultAreaCenter) {\n      setError('Please click on the map to select a center point first.');\n      return;\n    }\n    if (defaultAreaRadius <= 0 || searchProximity <= 0) {\n      setError('Radius and Proximity must be greater than zero.');\n      return;\n    }\n    setIsLoading(true);\n    setError(''); // Clear previous errors\n    setResults([]); // Clear previous results\n    setBenchmarkPrice(null); // Clear previous benchmark\n\n    const searchParams = {\n      defaultArea: {\n        type: 'Circle',\n        // Using Circle type as defined in backend/frontend\n        center: {\n          // Ensure lat/lng structure matches backend expectation\n          lat: defaultAreaCenter.lat,\n          lng: defaultAreaCenter.lng\n        },\n        radius: defaultAreaRadius\n      },\n      searchProximity: searchProximity,\n      filters: filters // Pass any additional filters collected from UI\n    };\n    try {\n      const data = await findCheaperNearbyHouses(searchParams);\n      console.log(\"API Response Data:\", data);\n\n      // Update state based on successful API response\n      setBenchmarkPrice(data.benchmarkPrice); // Will be null if none calculated\n      setResults(data.cheaperNearbyHouses || []); // Ensure it's an array\n\n      // Clear error on success\n      setError('');\n    } catch (err) {\n      console.error(\"Search failed:\", err);\n      // Set error message from the caught error (thrown by api.js)\n      setError(err.message || 'An unknown error occurred during the search.');\n      // Clear results on error\n      setResults([]);\n      setBenchmarkPrice(null);\n    } finally {\n      // Ensure loading is set to false regardless of success or failure\n      setIsLoading(false);\n    }\n  }, [defaultAreaCenter, defaultAreaRadius, searchProximity, filters]); // Dependencies for useCallback\n\n  // --- Render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Find Cheaper Houses Nearby\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SearchControls, {\n      radius: defaultAreaRadius,\n      setRadius: setDefaultAreaRadius,\n      proximity: searchProximity,\n      setProximity: setSearchProximity,\n      handleSearch: handleSearch,\n      isLoading: isLoading,\n      benchmarkPrice: benchmarkPrice,\n      resultsCount: results.length,\n      areaSelected: !!defaultAreaCenter // Pass true if center is not null\n      ,\n      error: error\n      // Pass filter state and setters here if you add filters:\n      // filters={filters}\n      // setFilters={setFilters}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MapComponent, {\n      initialCenter: mapInitialCenter,\n      initialZoom: mapInitialZoom,\n      defaultAreaCenter: defaultAreaCenter,\n      setDefaultAreaCenter: setDefaultAreaCenter // Pass the setter function\n      ,\n      defaultAreaRadius: defaultAreaRadius,\n      cheaperNearbyHouses: results\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), !isLoading && !error && (results.length > 0 || benchmarkPrice !== null) && /*#__PURE__*/_jsxDEV(ResultsList, {\n      houses: results\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this), !isLoading && !error && results.length === 0 && benchmarkPrice === null && defaultAreaCenter && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        marginTop: '10px'\n      },\n      children: \"No results found for the selected area and criteria.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n_s(App, \"Ku1WXaBLe9MMaBBnSEp4T3N7D2k=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useCallback","MapComponent","SearchControls","ResultsList","findCheaperNearbyHouses","jsxDEV","_jsxDEV","App","_s","mapInitialCenter","lat","lng","mapInitialZoom","defaultAreaCenter","setDefaultAreaCenter","defaultAreaRadius","setDefaultAreaRadius","searchProximity","setSearchProximity","filters","setFilters","results","setResults","benchmarkPrice","setBenchmarkPrice","isLoading","setIsLoading","error","setError","handleSearch","searchParams","defaultArea","type","center","radius","data","console","log","cheaperNearbyHouses","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","setRadius","proximity","setProximity","resultsCount","length","areaSelected","initialCenter","initialZoom","houses","style","textAlign","marginTop","_c","$RefreshReg$"],"sources":["/Users/telmonmaluleka/learn-react-app/MVP/Cheaper-Houses-Nearby/client/src/App.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport MapComponent from './components/MapComponent';\nimport SearchControls from './components/SearchControls';\nimport ResultsList from './components/ResultsList'; // Optional list view\nimport { findCheaperNearbyHouses } from './services/api';\nimport './index.css'; // Ensure styles are imported\n\nfunction App() {\n    // --- State ---\n    // Map View State (Set your desired initial view)\n    const [mapInitialCenter] = useState({ lat: 34.0522, lng: -118.2437 }); // Example: Los Angeles\n    const [mapInitialZoom] = useState(10);\n\n    // Search Parameters State\n    const [defaultAreaCenter, setDefaultAreaCenter] = useState(null); // { lat, lng } - Center selected by user click\n    const [defaultAreaRadius, setDefaultAreaRadius] = useState(1500); // meters - Default radius\n    const [searchProximity, setSearchProximity] = useState(5000); // meters - Default search proximity\n    const [filters, setFilters] = useState({}); // For future filters { minPrice, maxPrice, minBeds... }\n\n    // Results State\n    const [results, setResults] = useState([]); // Array of cheaper nearby house objects\n    const [benchmarkPrice, setBenchmarkPrice] = useState(null); // Median price from API\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState(''); // Error message string\n\n    // --- Handlers ---\n    const handleSearch = useCallback(async () => {\n        if (!defaultAreaCenter) {\n            setError('Please click on the map to select a center point first.');\n            return;\n        }\n        if (defaultAreaRadius <= 0 || searchProximity <= 0) {\n            setError('Radius and Proximity must be greater than zero.');\n            return;\n        }\n\n        setIsLoading(true);\n        setError(''); // Clear previous errors\n        setResults([]); // Clear previous results\n        setBenchmarkPrice(null); // Clear previous benchmark\n\n        const searchParams = {\n            defaultArea: {\n                type: 'Circle', // Using Circle type as defined in backend/frontend\n                center: { // Ensure lat/lng structure matches backend expectation\n                    lat: defaultAreaCenter.lat,\n                    lng: defaultAreaCenter.lng,\n                },\n                radius: defaultAreaRadius,\n            },\n            searchProximity: searchProximity,\n            filters: filters, // Pass any additional filters collected from UI\n        };\n\n        try {\n            const data = await findCheaperNearbyHouses(searchParams);\n            console.log(\"API Response Data:\", data);\n\n            // Update state based on successful API response\n            setBenchmarkPrice(data.benchmarkPrice); // Will be null if none calculated\n            setResults(data.cheaperNearbyHouses || []); // Ensure it's an array\n\n            // Clear error on success\n            setError('');\n\n        } catch (err) {\n             console.error(\"Search failed:\", err);\n             // Set error message from the caught error (thrown by api.js)\n             setError(err.message || 'An unknown error occurred during the search.');\n             // Clear results on error\n             setResults([]);\n             setBenchmarkPrice(null);\n        } finally {\n            // Ensure loading is set to false regardless of success or failure\n            setIsLoading(false);\n        }\n    }, [defaultAreaCenter, defaultAreaRadius, searchProximity, filters]); // Dependencies for useCallback\n\n\n    // --- Render ---\n    return (\n        <div className=\"app-container\">\n            <h1>Find Cheaper Houses Nearby</h1>\n\n            <SearchControls\n                radius={defaultAreaRadius}\n                setRadius={setDefaultAreaRadius}\n                proximity={searchProximity}\n                setProximity={setSearchProximity}\n                handleSearch={handleSearch}\n                isLoading={isLoading}\n                benchmarkPrice={benchmarkPrice}\n                resultsCount={results.length}\n                areaSelected={!!defaultAreaCenter} // Pass true if center is not null\n                error={error}\n                // Pass filter state and setters here if you add filters:\n                // filters={filters}\n                // setFilters={setFilters}\n            />\n\n            <MapComponent\n                initialCenter={mapInitialCenter}\n                initialZoom={mapInitialZoom}\n                defaultAreaCenter={defaultAreaCenter}\n                setDefaultAreaCenter={setDefaultAreaCenter} // Pass the setter function\n                defaultAreaRadius={defaultAreaRadius}\n                cheaperNearbyHouses={results}\n            />\n\n            {/* Optional: Display results in a list below the map */}\n            {!isLoading && !error && (results.length > 0 || benchmarkPrice !== null) &&\n                <ResultsList houses={results} />\n            }\n            {/* Display message if no results and no error */}\n             {!isLoading && !error && results.length === 0 && benchmarkPrice === null && defaultAreaCenter &&\n                <p style={{textAlign: 'center', marginTop: '10px'}}>No results found for the selected area and criteria.</p>\n            }\n\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}